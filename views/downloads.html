
<div id="main" class="container">

    <div id="torrents" class="row center-block  jumbotron" >


        @{if model.array ===null}
        <h1>Oops!</h1>
        <h3>There aren't torrent in downloading</h3>
          @{else}
          <div class="table-responsive">
      <table class="table table-bordered  table-hover" >
        @{foreach m in model.array}
        <tr>
          <td>@{m.torrent.nome}</td>
          <td>
            <div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Contents
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
      @{foreach a in m.torrent.content}
      <li><a>@{a}</a></li>
      @{end}
      </ul>
      </div>
          </td>
           <td>@{m.torrent.down_speed}</td>
           <td>@{m.torrent.progress}</td>
           <td>@{m.torrent.tot_down}</td>
           <td>@{m.status}</td>
            <td><button class="btn btn-danger" data-href="/delete/@{m.torrent.id}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></td>
        </tr>
        @{end}

      </table>
          </div>
        @{fi}
    </div>
</div>


<script>
$(function(){
    $(".btn-danger").click(function(){
        $.ajax({url:$(this).data("href")}).done(function(){
            var n = noty({
                layout: 'top',
                theme: 'relax', // or 'relax'
                type: 'success',
                text: 'The torrent was deleted', // can be html or string
                dismissQueue: true, // If you want to use queue feature set this true
                animation: {
                    open: {
                        height: 'toggle'
                    }, // or Animate.css class names like: 'animated bounceInLeft'
                    close: {
                        height: 'toggle'
                    }, // or Animate.css class names like: 'animated bounceOutLeft'
                    easing: 'swing',
                    speed: 500 // opening & closing animation speed
                },
                timeout: false, // delay for closing event. Set false for sticky notifications
                force: true, // adds notification to the beginning of queue when set to true
                modal: false,
                maxVisible: 5, // you can set max visible notification for dismissQueue true option,
                killer: true, // for close all notifications before show
                closeWith: ['click'], // ['click', 'button', 'hover', 'backdrop'] // backdrop click will close all notifications
                callback: {
                    onShow: function() {},
                    afterShow: function() {
                        setTimeout(function() {
                            n.close();
                        }, 2000);
                    },
                    onClose: function() {},
                    afterClose: function() {},
                    onCloseClick: function() {},
                },
                buttons: false // an array of buttons
            });
        })
    })
})


</script>
